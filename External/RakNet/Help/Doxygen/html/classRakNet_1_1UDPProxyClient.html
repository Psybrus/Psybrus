<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>RakNet: RakNet::UDPProxyClient Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="classes.html"><span>Class&nbsp;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="namespaceRakNet.html">RakNet</a>::<a class="el" href="classRakNet_1_1UDPProxyClient.html">UDPProxyClient</a>
  </div>
</div>
<div class="contents">
<h1>RakNet::UDPProxyClient Class Reference<br>
<small>
[<a class="el" href="group__UDP__PROXY__GROUP.html">UDPProxy</a>]</small>
</h1><!-- doxytag: class="RakNet::UDPProxyClient" --><!-- doxytag: inherits="RakNet::PluginInterface2" -->Communicates with <a class="el" href="classRakNet_1_1UDPProxyCoordinator.html" title="Middleman between UDPProxyServer and UDPProxyClient, maintaining a list of UDPProxyServer...">UDPProxyCoordinator</a>, in order to find a <a class="el" href="classRakNet_1_1UDPProxyServer.html" title="UDPProxyServer to control our instance of UDPForwarder.">UDPProxyServer</a> to forward our datagrams.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;UDPProxyClient.h&gt;</code>
<p>
<div class="dynheader">
Inheritance diagram for RakNet::UDPProxyClient:</div>
<div class="dynsection">

<p><center><img src="classRakNet_1_1UDPProxyClient.png" usemap="#RakNet::UDPProxyClient_map" border="0" alt=""></center>
<map name="RakNet::UDPProxyClient_map">
<area href="classRakNet_1_1PluginInterface2.html" alt="RakNet::PluginInterface2" shape="rect" coords="0,0,150,24">
</map>
</div>

<p>
<a href="classRakNet_1_1UDPProxyClient-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRakNet_1_1UDPProxyClient.html#8fc30b0a5224d0efe7ed9fe2ff9841d1">SetResultHandler</a> (<a class="el" href="structRakNet_1_1UDPProxyClientResultHandler.html">UDPProxyClientResultHandler</a> *rh)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRakNet_1_1UDPProxyClient.html#94ee5defadaa018d15de5ed2498625ad">RequestForwarding</a> (<a class="el" href="structRakNet_1_1SystemAddress.html">SystemAddress</a> proxyCoordinator, <a class="el" href="structRakNet_1_1SystemAddress.html">SystemAddress</a> sourceAddress, <a class="el" href="structRakNet_1_1SystemAddress.html">SystemAddress</a> targetAddressAsSeenFromCoordinator, RakNet::TimeMS timeoutOnNoDataMS, <a class="el" href="classRakNet_1_1BitStream.html">RakNet::BitStream</a> *serverSelectionBitstream=0)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRakNet_1_1UDPProxyClient.html#94193970bef43ead993f1dfb734d3f73">RequestForwarding</a> (<a class="el" href="structRakNet_1_1SystemAddress.html">SystemAddress</a> proxyCoordinator, <a class="el" href="structRakNet_1_1SystemAddress.html">SystemAddress</a> sourceAddress, <a class="el" href="structRakNet_1_1RakNetGUID.html">RakNetGUID</a> targetGuid, RakNet::TimeMS timeoutOnNoDataMS, <a class="el" href="classRakNet_1_1BitStream.html">RakNet::BitStream</a> *serverSelectionBitstream=0)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="0ef9ece963dde728a09c78f849683daf"></a><!-- doxytag: member="RakNet::UDPProxyClient::Update" ref="0ef9ece963dde728a09c78f849683daf" args="(void)" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRakNet_1_1UDPProxyClient.html#0ef9ece963dde728a09c78f849683daf">Update</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Update is called every time a packet is checked for . <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual <a class="el" href="group__PLUGIN__INTERFACE__GROUP.html#g89998adaafb29e5d879113b992161085">PluginReceiveResult</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRakNet_1_1UDPProxyClient.html#92e2cefd0e42ee8a86fde60e32cd53c2">OnReceive</a> (<a class="el" href="structRakNet_1_1Packet.html">Packet</a> *packet)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="c310e4654dd16088934f393345c2dc5c"></a><!-- doxytag: member="RakNet::UDPProxyClient::OnRakPeerShutdown" ref="c310e4654dd16088934f393345c2dc5c" args="(void)" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRakNet_1_1UDPProxyClient.html#c310e4654dd16088934f393345c2dc5c">OnRakPeerShutdown</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Called when <a class="el" href="classRakNet_1_1RakPeer.html" title="Main interface for network communications.">RakPeer</a> is shutdown. <br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Communicates with <a class="el" href="classRakNet_1_1UDPProxyCoordinator.html" title="Middleman between UDPProxyServer and UDPProxyClient, maintaining a list of UDPProxyServer...">UDPProxyCoordinator</a>, in order to find a <a class="el" href="classRakNet_1_1UDPProxyServer.html" title="UDPProxyServer to control our instance of UDPForwarder.">UDPProxyServer</a> to forward our datagrams. 
<p>
When NAT Punchthrough fails, it is possible to use a non-NAT system to forward messages from us to the recipient, and vice-versa.<br>
 The class to forward messages is <a class="el" href="classRakNet_1_1UDPForwarder.html" title="Forwards UDP datagrams. Independent of RakNet&#39;s protocol.">UDPForwarder</a>, and it is triggered over the network via the <a class="el" href="classRakNet_1_1UDPProxyServer.html" title="UDPProxyServer to control our instance of UDPForwarder.">UDPProxyServer</a> plugin.<br>
 The <a class="el" href="classRakNet_1_1UDPProxyClient.html" title="Communicates with UDPProxyCoordinator, in order to find a UDPProxyServer to forward...">UDPProxyClient</a> connects to <a class="el" href="classRakNet_1_1UDPProxyCoordinator.html" title="Middleman between UDPProxyServer and UDPProxyClient, maintaining a list of UDPProxyServer...">UDPProxyCoordinator</a> to get a list of servers running <a class="el" href="classRakNet_1_1UDPProxyServer.html" title="UDPProxyServer to control our instance of UDPForwarder.">UDPProxyServer</a>, and the coordinator will relay our forwarding request <dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="classRakNet_1_1NatPunchthroughServer.html" title="Server code for NATPunchthrough.">NatPunchthroughServer</a> <p>
<a class="el" href="classRakNet_1_1NatPunchthroughClient.html" title="Client code for NATPunchthrough.">NatPunchthroughClient</a> </dd></dl>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="92e2cefd0e42ee8a86fde60e32cd53c2"></a><!-- doxytag: member="RakNet::UDPProxyClient::OnReceive" ref="92e2cefd0e42ee8a86fde60e32cd53c2" args="(Packet *packet)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="group__PLUGIN__INTERFACE__GROUP.html#g89998adaafb29e5d879113b992161085">PluginReceiveResult</a> RakNet::UDPProxyClient::OnReceive           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structRakNet_1_1Packet.html">Packet</a> *&nbsp;</td>
          <td class="paramname"> <em>packet</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
OnReceive is called for every packet. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>packet</em>&nbsp;</td><td>the packet that is being returned to the user </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>True to allow the game and other plugins to get this message, false to absorb it </dd></dl>

<p>Reimplemented from <a class="el" href="classRakNet_1_1PluginInterface2.html#a86f33263c1648f11b8a006469272639">RakNet::PluginInterface2</a>.</p>

</div>
</div><p>
<a class="anchor" name="94193970bef43ead993f1dfb734d3f73"></a><!-- doxytag: member="RakNet::UDPProxyClient::RequestForwarding" ref="94193970bef43ead993f1dfb734d3f73" args="(SystemAddress proxyCoordinator, SystemAddress sourceAddress, RakNetGUID targetGuid, RakNet::TimeMS timeoutOnNoDataMS, RakNet::BitStream *serverSelectionBitstream=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool RakNet::UDPProxyClient::RequestForwarding           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structRakNet_1_1SystemAddress.html">SystemAddress</a>&nbsp;</td>
          <td class="paramname"> <em>proxyCoordinator</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structRakNet_1_1SystemAddress.html">SystemAddress</a>&nbsp;</td>
          <td class="paramname"> <em>sourceAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structRakNet_1_1RakNetGUID.html">RakNetGUID</a>&nbsp;</td>
          <td class="paramname"> <em>targetGuid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">RakNet::TimeMS&nbsp;</td>
          <td class="paramname"> <em>timeoutOnNoDataMS</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classRakNet_1_1BitStream.html">RakNet::BitStream</a> *&nbsp;</td>
          <td class="paramname"> <em>serverSelectionBitstream</em> = <code>0</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Same as above, but specify the target with a GUID, in case you don't know what its address is to the coordinator If requesting forwarding to a <a class="el" href="namespaceRakNet.html" title="Simple class to send changes between directories. In essence, a simple autopatcher...">RakNet</a> enabled system, then it is easier to use targetGuid instead of targetAddressAsSeenFromCoordinator 
</div>
</div><p>
<a class="anchor" name="94ee5defadaa018d15de5ed2498625ad"></a><!-- doxytag: member="RakNet::UDPProxyClient::RequestForwarding" ref="94ee5defadaa018d15de5ed2498625ad" args="(SystemAddress proxyCoordinator, SystemAddress sourceAddress, SystemAddress targetAddressAsSeenFromCoordinator, RakNet::TimeMS timeoutOnNoDataMS, RakNet::BitStream *serverSelectionBitstream=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool RakNet::UDPProxyClient::RequestForwarding           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structRakNet_1_1SystemAddress.html">SystemAddress</a>&nbsp;</td>
          <td class="paramname"> <em>proxyCoordinator</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structRakNet_1_1SystemAddress.html">SystemAddress</a>&nbsp;</td>
          <td class="paramname"> <em>sourceAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structRakNet_1_1SystemAddress.html">SystemAddress</a>&nbsp;</td>
          <td class="paramname"> <em>targetAddressAsSeenFromCoordinator</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">RakNet::TimeMS&nbsp;</td>
          <td class="paramname"> <em>timeoutOnNoDataMS</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classRakNet_1_1BitStream.html">RakNet::BitStream</a> *&nbsp;</td>
          <td class="paramname"> <em>serverSelectionBitstream</em> = <code>0</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Sends a request to proxyCoordinator to find a server and have that server setup <a class="el" href="classRakNet_1_1UDPForwarder.html#c1b49b26d3f1d0936e320838f373375c">UDPForwarder::StartForwarding()</a> on our address to <em>targetAddressAsSeenFromCoordinator</em> The forwarded datagrams can be from any UDP source, not just <a class="el" href="namespaceRakNet.html" title="Simple class to send changes between directories. In essence, a simple autopatcher...">RakNet</a> <dl class="pre" compact><dt><b>Precondition:</b></dt><dd>Must be connected to <em>proxyCoordinator</em> <p>
Systems running <a class="el" href="classRakNet_1_1UDPProxyServer.html" title="UDPProxyServer to control our instance of UDPForwarder.">UDPProxyServer</a> must be connected to <em>proxyCoordinator</em> and logged in via UDPProxyCoordinator::LoginServer() or <a class="el" href="classRakNet_1_1UDPProxyServer.html#32edaff2aec11cce6a138897b0e2a158">UDPProxyServer::LoginToCoordinator()</a> </dd></dl>
<dl class="note" compact><dt><b>Note:</b></dt><dd>May still fail, if all proxy servers have no open connections. <p>
RakNet's protocol will ensure a message is sent at least every 5 seconds, so if routing <a class="el" href="namespaceRakNet.html" title="Simple class to send changes between directories. In essence, a simple autopatcher...">RakNet</a> messages, it is a reasonable value for timeoutOnNoDataMS, plus an extra few seconds for latency. </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>proxyCoordinator</em>&nbsp;</td><td>System we are connected to that is running the <a class="el" href="classRakNet_1_1UDPProxyCoordinator.html" title="Middleman between UDPProxyServer and UDPProxyClient, maintaining a list of UDPProxyServer...">UDPProxyCoordinator</a> plugin </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>sourceAddress</em>&nbsp;</td><td>External IP address of the system we want to forward messages from. This does not have to be our own system. To specify our own system, you can pass UNASSIGNED_SYSTEM_ADDRESS which the coordinator will treat as our external IP address. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>targetAddressAsSeenFromCoordinator</em>&nbsp;</td><td>External IP address of the system we want to forward messages to. If this system is connected to <a class="el" href="classRakNet_1_1UDPProxyCoordinator.html" title="Middleman between UDPProxyServer and UDPProxyClient, maintaining a list of UDPProxyServer...">UDPProxyCoordinator</a> at this address using <a class="el" href="namespaceRakNet.html" title="Simple class to send changes between directories. In essence, a simple autopatcher...">RakNet</a>, that system will ping the server and thus open the router for incoming communication. In any other case, you are responsible for doing your own network communication to have that system ping the server. See also targetGuid in the other version of <a class="el" href="classRakNet_1_1UDPProxyClient.html#94ee5defadaa018d15de5ed2498625ad">RequestForwarding()</a>, to avoid the need to know the IP address to the coordinator of the destination. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>timeoutOnNoData</em>&nbsp;</td><td>If no data is sent by the forwarded systems, how long before removing the forward entry from <a class="el" href="classRakNet_1_1UDPForwarder.html" title="Forwards UDP datagrams. Independent of RakNet&#39;s protocol.">UDPForwarder</a>? UDP_FORWARDER_MAXIMUM_TIMEOUT is the maximum value. Recommended high enough to not drop valid connections, but low enough to not waste forwarding slots on the proxy server. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>serverSelectionBitstream</em>&nbsp;</td><td>If you want to send data to UDPProxyCoordinator::GetBestServer(), write it here </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>true if the request was sent, false if we are not connected to proxyCoordinator </dd></dl>

</div>
</div><p>
<a class="anchor" name="8fc30b0a5224d0efe7ed9fe2ff9841d1"></a><!-- doxytag: member="RakNet::UDPProxyClient::SetResultHandler" ref="8fc30b0a5224d0efe7ed9fe2ff9841d1" args="(UDPProxyClientResultHandler *rh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RakNet::UDPProxyClient::SetResultHandler           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structRakNet_1_1UDPProxyClientResultHandler.html">UDPProxyClientResultHandler</a> *&nbsp;</td>
          <td class="paramname"> <em>rh</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Receives the results of calling <a class="el" href="classRakNet_1_1UDPProxyClient.html#94ee5defadaa018d15de5ed2498625ad">RequestForwarding()</a> Set before calling RequestForwarding or you won't know what happened <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>resultHandler</em>&nbsp;</td><td></td></tr>
  </table>
</dl>

</div>
</div><p>
<hr>The documentation for this class was generated from the following file:<ul>
<li>d:/temp/RakNet_PC/Source/<a class="el" href="UDPProxyClient_8h.html">UDPProxyClient.h</a></ul>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Wed Feb 1 13:33:48 2012 for RakNet by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.7.1 </small></address>
</body>
</html>
